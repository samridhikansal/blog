{% extends 'base.html' %}

{% block content %}
<div class="container">
  {% if messages %}
    {% for message in messages %}
    <div class="alert alert-success mt-2" role="alert">{{message}}</div>
    {% endfor%}
  {% endif %}
</div>
<article class="post">
    
    <h2 class="post-title">{{ post.name }}</h2>
    {% if post.subtitle %}
    <h3 class="post-subtitle">{{ post.subtitle }}</h3>
    
    {% endif %}
  </a>
  <p >
   {{post.desc}}
  </p>

</article>

<section class="container mb-5">
    
        <form class="w-60 d-flex flex-column justify-content-center mb-5 " method="post" enctype="multipart/form-data" action="{% url 'comments' post_id=post.id %}">

             {% csrf_token%}
             {% for field in form %}
                   <div class="mb-3 row form-group">
                      <div class="col-sm-2 col-form-label"> {{field.label}}</div> 
                       <div class="col-sm-10"> {{field}}</div>
                   </div>
             {% endfor %}
            <div class="d-flex flex-row justify-content-center align-items-center ">
                   <button class="btn btn-secondary " type="submit">Add comment</button>
            </div> 
       </form>
    

    
</section>
  {% if comments %}
  <section class="container  pt-3 pb-3">
    <h2>Comments</h2>
    {% for comment in comments %}
    <div class="d-flex flex-row mt-2">
        <div class="col-sm-2">{{comment.author}}</div> 
        <div class="vr"></div>
        <div class=" mx-2 col-sm-7">{{comment.comment}} </div>
        <form method="post" action = "{% url 'comments_reply' id=comment.id  post_id=post.id %}">
          {%csrf_token%}
          {{reply_form}}
        
          <button class="btn btn-primary mb-2">Reply</button>

        </form>
      </div>
      
    <div class=" border border-bottom border-primary"></div>
     
    {% endfor %}
  </section>
  {% endif %}
{% endblock %}




